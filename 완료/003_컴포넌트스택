003_ì»´í¬ë„ŒíŠ¸ìŠ¤í™
# ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ìŠ¤í™ ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨
1. [TokenBalanceWidget](#tokenbalancewidget)
2. [CJChatBubble](#cjchatbubble)
3. [CJAIChatBubble](#cjaichatbubble)
4. [ì‚¬ìš© ì˜ˆì‹œ](#ì‚¬ìš©-ì˜ˆì‹œ)
5. [ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ì´ë“œ](#ì»¤ìŠ¤í„°ë§ˆì´ì§•-ê°€ì´ë“œ)

---

## ğŸ’° TokenBalanceWidget

### ê°œìš”
ì‚¬ìš©ìì˜ í† í° ì”ê³ ë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œí•˜ëŠ” ìœ„ì ¯ì…ë‹ˆë‹¤. í† í° ìƒíƒœì— ë”°ë¼ ìƒ‰ìƒì´ ë³€ê²½ë˜ë©°, ì”ê³  ë³€í™”ë¥¼ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.

### Props ìƒì„¸
| Prop | Type | Default | Required | Description |
|------|------|---------|----------|-------------|
| `amount` | `number` | - | âœ… | í† í° ì”ê³  ìˆ˜ëŸ‰ |
| `status` | `'normal' \| 'warning' \| 'critical'` | `'normal'` | âŒ | í† í° ìƒíƒœ |
| `change` | `'none' \| 'increase' \| 'decrease'` | `'none'` | âŒ | í† í° ë³€í™” ë°©í–¥ |
| `className` | `string` | `''` | âŒ | ì¶”ê°€ CSS í´ë˜ìŠ¤ |

### ìƒíƒœë³„ ìŠ¤íƒ€ì¼
```typescript
const statusStyles = {
  normal: {
    color: 'emerald-400',
    background: 'emerald-500/10',
    border: 'emerald-500/30',
    glow: 'emerald-500/20'
  },
  warning: {
    color: 'amber-400',
    background: 'amber-500/10',
    border: 'amber-500/30',
    glow: 'amber-500/20'
  },
  critical: {
    color: 'red-400',
    background: 'red-500/10',
    border: 'red-500/30',
    glow: 'red-500/20'
  }
};
```

### ì‚¬ìš© ì˜ˆì‹œ
```tsx
// ê¸°ë³¸ ì‚¬ìš©ë²•
<TokenBalanceWidget amount={1234567} />

// ê²½ê³  ìƒíƒœ
<TokenBalanceWidget 
  amount={50000} 
  status="warning" 
  change="decrease" 
/>

// ìœ„í—˜ ìƒíƒœ
<TokenBalanceWidget 
  amount={5000} 
  status="critical" 
  change="decrease"
  className="mb-4" 
/>

// ì¦ê°€ ìƒíƒœ
<TokenBalanceWidget 
  amount={2000000} 
  status="normal" 
  change="increase" 
/>
```

### ì• ë‹ˆë©”ì´ì…˜ íŠ¸ë¦¬ê±°
- **ë§ˆìš´íŠ¸**: í˜ì´ë“œì¸ + ìŠ¬ë¼ì´ë“œì—… ì• ë‹ˆë©”ì´ì…˜
- **amount ë³€ê²½**: ìŠ¤ì¼€ì¼ ì• ë‹ˆë©”ì´ì…˜ + ìˆ«ì ì¹´ìš´í„° íš¨ê³¼
- **status ë³€ê²½**: ìƒ‰ìƒ íŠ¸ëœì§€ì…˜ + ê¸€ë¡œìš° íš¨ê³¼
- **change ë³€ê²½**: ì•„ì´ì½˜ íšŒì „ + íŠ¸ë Œë“œ í‘œì‹œ

### ë°˜ì‘í˜• ë™ì‘
```css
/* Mobile (ê¸°ë³¸) */
.token-widget {
  width: 100%;
  max-width: 28rem; /* max-w-md */
  margin: 0 auto;
}

/* Desktop (lg ì´ìƒ) */
@media (min-width: 1024px) {
  .token-widget {
    margin: 0;
  }
}
```

---

## ğŸ’¬ CJChatBubble

### ê°œìš”
ë‹¨ì¼ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” ì±„íŒ… ë²„ë¸” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. AI ì•„ë°”íƒ€ì˜ ê°ì • ìƒíƒœì™€ ë©”ì‹œì§€ ìƒíƒœë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.

### Props ìƒì„¸
| Prop | Type | Default | Required | Description |
|------|------|---------|----------|-------------|
| `message` | `string` | - | âœ… | í‘œì‹œí•  ë©”ì‹œì§€ í…ìŠ¤íŠ¸ |
| `state` | `'idle' \| 'typing' \| 'speaking'` | `'idle'` | âŒ | AI ìƒíƒœ |
| `avatarMood` | `'normal' \| 'happy' \| 'sad' \| 'angry'` | `'normal'` | âŒ | ì•„ë°”íƒ€ ê°ì • ìƒíƒœ |
| `showVoiceToggle` | `boolean` | `false` | âŒ | ìŒì„± í† ê¸€ ë²„íŠ¼ í‘œì‹œ |
| `onVoiceToggle` | `() => void` | - | âŒ | ìŒì„± í† ê¸€ í•¸ë“¤ëŸ¬ |
| `className` | `string` | `''` | âŒ | ì¶”ê°€ CSS í´ë˜ìŠ¤ |

### ì•„ë°”íƒ€ ê°ì •ë³„ ìŠ¤íƒ€ì¼
```typescript
const avatarMoods = {
  normal: {
    gradient: 'from-blue-500 to-purple-500',
    icon: 'Sparkles',
    filter: 'saturate-100',
    glow: 'shadow-blue-500/30'
  },
  happy: {
    gradient: 'from-emerald-400 to-cyan-400',
    icon: 'Heart',
    filter: 'saturate-150 brightness-110',
    glow: 'shadow-emerald-400/30'
  },
  sad: {
    gradient: 'from-blue-400 to-indigo-400',
    icon: 'Frown',
    filter: 'saturate-75 brightness-90',
    glow: 'shadow-blue-400/30'
  },
  angry: {
    gradient: 'from-red-400 to-orange-400',
    icon: 'Angry',
    filter: 'saturate-125 contrast-110',
    glow: 'shadow-red-400/30'
  }
};
```

### ìƒíƒœë³„ ì• ë‹ˆë©”ì´ì…˜
```typescript
const stateAnimations = {
  idle: {
    scale: [1, 1.02, 1],
    transition: { duration: 3, repeat: Infinity }
  },
  typing: {
    scale: [1, 1.05, 1],
    transition: { duration: 1.5, repeat: Infinity }
  },
  speaking: {
    scale: [1, 1.1, 1],
    transition: { duration: 0.8, repeat: Infinity }
  }
};
```

### ì‚¬ìš© ì˜ˆì‹œ
```tsx
// ê¸°ë³¸ ë©”ì‹œì§€
<CJChatBubble message="ì•ˆë…•í•˜ì„¸ìš”! ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?" />

// íƒ€ì´í•‘ ìƒíƒœ
<CJChatBubble 
  message="í˜„ì¬ ë‹µë³€ì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤..." 
  state="typing"
  avatarMood="normal"
/>

// ê¸°ìœ ê°ì • + ìŒì„± í† ê¸€
<CJChatBubble 
  message="ì™€! ì •ë§ ì¢‹ì€ ì†Œì‹ì´ë„¤ìš”! ğŸ‰"
  state="speaking"
  avatarMood="happy"
  showVoiceToggle={true}
  onVoiceToggle={() => console.log('Voice toggled')}
/>

// ìŠ¬í”ˆ ê°ì •
<CJChatBubble 
  message="ì£„ì†¡í•©ë‹ˆë‹¤. ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."
  avatarMood="sad"
  state="idle"
/>

// í™”ë‚œ ê°ì •
<CJChatBubble 
  message="ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!"
  avatarMood="angry"
  state="idle"
/>
```

### íƒ€ì´í•‘ íš¨ê³¼ ì„¤ì •
```typescript
// íƒ€ì´í•‘ ì†ë„ ì¡°ì ˆ
const typingSpeed = 50; // ms per character

// íƒ€ì´í•‘ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
useEffect(() => {
  if (state === 'typing') {
    setDisplayedMessage('');
    let index = 0;
    const timer = setInterval(() => {
      if (index < message.length) {
        setDisplayedMessage(prev => prev + message[index]);
        index++;
      } else {
        clearInterval(timer);
      }
    }, typingSpeed);
    return () => clearInterval(timer);
  }
}, [message, state]);
```

---

## ğŸ¤– CJAIChatBubble

### ê°œìš”
ì™„ì „í•œ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ì‚¬ìš©ìì™€ AI ê°„ì˜ ëŒ€í™”ë¥¼ ê´€ë¦¬í•˜ë©°, í”Œë¡œíŒ… í˜•íƒœë¡œ í‘œì‹œë©ë‹ˆë‹¤.

### Props ìƒì„¸
| Prop | Type | Default | Required | Description |
|------|------|---------|----------|-------------|
| `className` | `string` | `''` | âŒ | ì¶”ê°€ CSS í´ë˜ìŠ¤ |
| `position` | `'bottom-right' \| 'bottom-left' \| 'top-right' \| 'top-left'` | `'bottom-right'` | âŒ | ì±„íŒ… ìœ„ì¹˜ |
| `onSendMessage` | `(message: string) => Promise<string>` | - | âŒ | ë©”ì‹œì§€ ì „ì†¡ í•¸ë“¤ëŸ¬ |

### Message ì¸í„°í˜ì´ìŠ¤
```typescript
interface Message {
  id: string;
  text: string;
  sender: 'user' | 'ai';
  timestamp: Date;
  isTyping?: boolean;
}
```

### ìœ„ì¹˜ë³„ CSS í´ë˜ìŠ¤
```typescript
const positionClasses = {
  'bottom-right': 'bottom-4 right-4',
  'bottom-left': 'bottom-4 left-4',
  'top-right': 'top-4 right-4',
  'top-left': 'top-4 left-4'
};
```

### ì‚¬ìš© ì˜ˆì‹œ
```tsx
// ê¸°ë³¸ ì‚¬ìš©ë²•
<CJAIChatBubble />

// ì»¤ìŠ¤í…€ ìœ„ì¹˜
<CJAIChatBubble position="bottom-left" />

// ì»¤ìŠ¤í…€ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬
<CJAIChatBubble 
  position="bottom-right"
  onSendMessage={async (message) => {
    // API í˜¸ì¶œ
    const response = await fetch('/api/chat', {
      method: 'POST',
      body: JSON.stringify({ message })
    });
    const data = await response.json();
    return data.reply;
  }}
/>

// ì¶”ê°€ ìŠ¤íƒ€ì¼ë§
<CJAIChatBubble 
  className="z-[100]"
  position="top-right"
  onSendMessage={handleAIMessage}
/>
```

### ìƒíƒœ ê´€ë¦¬
```typescript
// ì±„íŒ… ìƒíƒœ
const [isOpen, setIsOpen] = useState(false);
const [messages, setMessages] = useState<Message[]>([]);
const [inputValue, setInputValue] = useState('');
const [isLoading, setIsLoading] = useState(false);

// ë©”ì‹œì§€ ì „ì†¡ í”Œë¡œìš°
const handleSendMessage = async () => {
  // 1. ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
  const userMessage = { id: Date.now().toString(), text: inputValue, sender: 'user', timestamp: new Date() };
  setMessages(prev => [...prev, userMessage]);
  
  // 2. íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„° í‘œì‹œ
  const typingMessage = { id: 'typing', text: '...', sender: 'ai', timestamp: new Date(), isTyping: true };
  setMessages(prev => [...prev, typingMessage]);
  
  // 3. API í˜¸ì¶œ
  try {
    const response = await onSendMessage(inputValue);
    setMessages(prev => {
      const filtered = prev.filter(m => m.id !== 'typing');
      return [...filtered, { id: Date.now().toString(), text: response, sender: 'ai', timestamp: new Date() }];
    });
  } catch (error) {
    // ì—ëŸ¬ ì²˜ë¦¬
  }
};
```

---

## ğŸ¯ ì‚¬ìš© ì˜ˆì‹œ

### ì™„ì „í•œ ëŒ€ì‹œë³´ë“œ êµ¬ì„±
```tsx
import { TokenBalanceWidget } from './components/TokenBalanceWidget';
import { CJChatBubble } from './components/CJChatBubble';
import { CJAIChatBubble } from './components/CJAIChatBubble';

export default function Dashboard() {
  const [tokenData, setTokenData] = useState({
    amount: 1234567,
    status: 'normal' as const,
    change: 'increase' as const
  });

  const handleAIMessage = async (message: string) => {
    // AI ì‘ë‹µ ë¡œì§
    return `AI ì‘ë‹µ: ${message}`;
  };

  return (
    <div className="min-h-screen bg-slate-900 p-6">
      {/* í† í° ìœ„ì ¯ */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <TokenBalanceWidget
          amount={tokenData.amount}
          status={tokenData.status}
          change={tokenData.change}
        />
      </div>

      {/* ë©”ì‹œì§€ í”¼ë“œ */}
      <div className="space-y-4 mb-8">
        <CJChatBubble
          message="í™˜ì˜í•©ë‹ˆë‹¤! ì˜¤ëŠ˜ë„ ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”!"
          avatarMood="happy"
          state="idle"
          showVoiceToggle={true}
        />
        
        <CJChatBubble
          message="í˜„ì¬ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤..."
          avatarMood="normal"
          state="typing"
        />
      </div>

      {/* í”Œë¡œíŒ… ì±„íŒ… */}
      <CJAIChatBubble
        position="bottom-right"
        onSendMessage={handleAIMessage}
      />
    </div>
  );
}
```

### ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì˜ˆì‹œ
```tsx
// ì›¹ì†Œì¼“ì„ í†µí•œ ì‹¤ì‹œê°„ í† í° ì—…ë°ì´íŠ¸
useEffect(() => {
  const ws = new WebSocket('ws://localhost:8080');
  
  ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    if (data.type === 'token_update') {
      setTokenData(prev => ({
        ...prev,
        amount: data.amount,
        status: data.amount < 100000 ? 'critical' : data.amount < 500000 ? 'warning' : 'normal',
        change: data.amount > prev.amount ? 'increase' : 'decrease'
      }));
    }
  };

  return () => ws.close();
}, []);

// AI ìƒíƒœ ë³€í™”ì— ë”°ë¥¸ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
const [currentMessage, setCurrentMessage] = useState('');
const [aiState, setAiState] = useState<'idle' | 'typing' | 'speaking'>('idle');

const simulateAIResponse = async () => {
  setAiState('typing');
  await new Promise(resolve => setTimeout(resolve, 2000));
  setCurrentMessage('ë‹µë³€ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!');
  setAiState('speaking');
  await new Promise(resolve => setTimeout(resolve, 3000));
  setAiState('idle');
};
```

---

## ğŸ¨ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ì´ë“œ

### í…Œë§ˆ ì»¤ìŠ¤í„°ë§ˆì´ì§•
```typescript
// ì»¤ìŠ¤í…€ í…Œë§ˆ ìƒì„±
const customTheme = {
  colors: {
    primary: '#6366f1',
    secondary: '#8b5cf6',
    success: '#10b981',
    warning: '#f59e0b',
    error: '#ef4444'
  },
  spacing: {
    xs: '0.25rem',
    sm: '0.5rem',
    md: '1rem',
    lg: '1.5rem',
    xl: '2rem'
  },
  borderRadius: {
    sm: '0.25rem',
    md: '0.5rem',
    lg: '0.75rem',
    xl: '1rem'
  }
};

// í…Œë§ˆ ì ìš© ì˜ˆì‹œ
<TokenBalanceWidget
  amount={1000000}
  className="bg-purple-500/10 border-purple-500/30"
  style={{
    '--token-normal': customTheme.colors.primary,
    '--token-warning': customTheme.colors.warning,
    '--token-critical': customTheme.colors.error
  }}
/>
```

### ì• ë‹ˆë©”ì´ì…˜ ì»¤ìŠ¤í„°ë§ˆì´ì§•
```typescript
// ì»¤ìŠ¤í…€ ì• ë‹ˆë©”ì´ì…˜ ì„¤ì •
const customAnimations = {
  duration: {
    fast: 0.2,
    normal: 0.3,
    slow: 0.5
  },
  easing: {
    smooth: [0.4, 0, 0.2, 1],
    bounce: [0.68, -0.55, 0.265, 1.55],
    spring: { type: "spring", stiffness: 100, damping: 15 }
  }
};

// ì• ë‹ˆë©”ì´ì…˜ ì ìš©
<motion.div
  initial={{ opacity: 0, scale: 0.8 }}
  animate={{ opacity: 1, scale: 1 }}
  transition={customAnimations.easing.spring}
>
  <CJChatBubble message="ì»¤ìŠ¤í…€ ì• ë‹ˆë©”ì´ì…˜ í…ŒìŠ¤íŠ¸" />
</motion.div>
```

### ë°˜ì‘í˜• ì»¤ìŠ¤í„°ë§ˆì´ì§•
```css
/* ì»¤ìŠ¤í…€ ë¸Œë ˆì´í¬í¬ì¸íŠ¸ */
@media (max-width: 480px) {
  .token-widget {
    padding: 1rem;
    margin: 0 0.5rem;
  }
  
  .chat-bubble {
    max-width: calc(100vw - 2rem);
    font-size: 0.875rem;
  }
}

@media (min-width: 1440px) {
  .token-widget {
    max-width: 32rem;
  }
  
  .chat-bubble {
    max-width: 24rem;
  }
}
```

### ì ‘ê·¼ì„± ì»¤ìŠ¤í„°ë§ˆì´ì§•
```tsx
// ê³ ëŒ€ë¹„ ëª¨ë“œ ì§€ì›
const useHighContrast = () => {
  const [highContrast, setHighContrast] = useState(false);
  
  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-contrast: high)');
    setHighContrast(mediaQuery.matches);
    
    const handler = (e: MediaQueryListEvent) => setHighContrast(e.matches);
    mediaQuery.addEventListener('change', handler);
    return () => mediaQuery.removeEventListener('change', handler);
  }, []);
  
  return highContrast;
};

// ì‚¬ìš© ì˜ˆì‹œ
const MyComponent = () => {
  const highContrast = useHighContrast();
  
  return (
    <TokenBalanceWidget
      amount={1000000}
      className={highContrast ? 'contrast-high' : 'contrast-normal'}
    />
  );
};
```

---

*ì´ ë¬¸ì„œëŠ” ê° ì»´í¬ë„ŒíŠ¸ì˜ ìƒì„¸í•œ ì‚¬ìš©ë²•ê³¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì¶”ê°€ ì§ˆë¬¸ì´ë‚˜ ìš”êµ¬ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ë¬¸ì˜í•´ ì£¼ì„¸ìš”.*